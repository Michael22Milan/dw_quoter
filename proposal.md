# SLM智能报价系统 - 变更提案 v2.2

**提案日期**: 2026-01-17  
**提案状态**: 待确认  
**影响范围**: 快速报价页面、报价算法、配置模块

---

## 1. 变更背景

经过实际使用测试，发现当前报价逻辑需要细化，以更好地反映真实成本结构和风险评估。

---

## 2. 变更内容概述

### 2.1 报价结构细分

**现状**：
- 报价 = 预估时长 × 每分钟成本 × 难度系数

**变更后**：
- **打印价格** = 基准打印价格 × (难度系数 + 风险系数)
- **后处理价格** = 后处理时长(小时) × 后处理单价(元/小时)
- **最终报价** = 打印价格 + 后处理价格

---

### 2.2 新增输入项

| 输入项 | 类型 | 说明 |
|--------|------|------|
| 后处理时长 | 数字输入框 | 单位：小时，用于计算后处理成本 |
| 后处理单价 | 数字输入框 | 预设值：50元/小时，用户可随时修改 |

---

### 2.3 难度系数调整

**现状**：
- 滑块拖动，范围 0.8 ~ 2.0，连续值

**变更后**：
- 下拉选择框，固定选项：**1、2、3**（带描述文字）
- 显示格式与含义：
  - **1 - 正常**：常规结构件
  - **2 - 偏难**：中等复杂度
  - **3 - 很难**：高复杂度/精细结构

---

### 2.4 新增风险系数

**新增参数**：
- 下拉选择框，固定选项：**0、0.5、1、1.5、2**
- 含义：
  - 0 = 无风险（成熟工艺/老客户）
  - 0.5 = 低风险
  - 1 = 标准风险
  - 1.5 = 中高风险（新工艺/首次合作）
  - 2 = 高风险（极端要求/紧急订单）

---

## 3. 新报价公式

### 3.1 打印价格计算

```
基准打印价格 = (零件重量 / 材料效率) × 每分钟开机成本

打印价格 = 基准打印价格 × (难度系数 + 风险系数)
```

**示例**：
- 基准打印价格 = 1000元
- 难度系数 = 1（正常），风险系数 = 0（无风险）
- 打印价格 = 1000 × (1 + 0) = **1000元**（无加成）

**示例2**：
- 基准打印价格 = 1000元
- 难度系数 = 2（偏难），风险系数 = 1（标准）
- 打印价格 = 1000 × (2 + 1) = **3000元**

### 3.2 后处理价格计算

```
后处理价格 = 后处理时长(小时) × 后处理单价(元/小时)
```

**示例**：
- 后处理时长 = 3小时
- 后处理单价 = 50元/小时
- 后处理价格 = 3 × 50 = **150元**

### 3.3 最终报价

```
最终报价 = 打印价格 + 后处理价格
```

**示例**：
- 最终报价 = 3000 + 150 = **3150元**

---

## 4. UI变更说明

### 4.1 快速报价页面

**输入区域变更**：

| 原组件 | 变更后 |
|--------|--------|
| 难度系数滑块 (0.8-2.0) | 下拉选择框 (1/2/3) |
| - | 新增：风险系数下拉框 (0.5/1/1.5/2) |
| - | 新增：后处理时长输入框 (小时) |
| - | 新增：后处理单价输入框 (预设50，可调) |

**输出区域变更**：

| 原显示 | 变更后 |
|--------|--------|
| 单一报价金额 | 分项显示：打印价格 / 后处理价格 / 总报价 |

---

## 5. 已确认问题

1. ✅ **风险系数选项**：调整为 0、0.5、1、1.5、2 共5个选项，最小值为0

2. ✅ **后处理单价**：设计为输入框，预设值50元/小时，用户可随时修改（不持久化，每次启动恢复默认）

3. ✅ **难度系数描述**：下拉框显示描述文字
   - 1 - 正常
   - 2 - 偏难
   - 3 - 很难

---

## 6. 版本规划

- **当前版本**: v2.1
- **变更后版本**: v2.2

---

**请确认以上理解是否正确，确认后将开始按task.md执行开发任务。**
